<h1 class="heading">Login</h1>
<form class="login-form" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label for="username">E-mail</label>
        <input type="text" id="email" name="email" type="email" formControlName="email" placeholder="Email" required email="true">
        <div *ngIf="email!.invalid && (email!.dirty || email!.touched)" class="login-alert">
            <div *ngIf="email!.errors?.['required']">Email is required.</div>
            <div *ngIf="email!.errors?.['email']">This is not a valid email.</div>
        </div>
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <div class="password-group">
            <input [type]="isPasswordVisible" id="password" name="password" type="password" formControlName="password" placeholder="Password" required minlength="8">
            <div class="password-toggle" (click)="togglePasswordVisibility()">
                <span *ngIf="isPasswordVisible === 'password'" title="Show Password">
                    <ng-icon name="radixEyeClosed" size="1.25rem"></ng-icon>
                </span>
                <span *ngIf="isPasswordVisible === 'text'" title="Hide Password">
                    <ng-icon name="radixEyeOpen" size="1.25rem"></ng-icon>
                </span>
            </div>
        </div>
        <div *ngIf="password!.invalid && (password!.dirty || password!.touched)" class="login-alert">
            <div *ngIf="password!.errors?.['required']">Password is required.</div>
            <div *ngIf="password!.errors?.['minlength']">Password must be at least 8 characters long.</div>
        </div>
    </div>
    <button [disabled]="!loginForm.valid" type="submit">Login</button>
    <div *ngIf="this.httpErrorService.httpError?.error" class="login-alert">An error occurred: {{ this.httpErrorService.httpError?.error?.detail }}</div>
    <div class="signup-link">
        Don't have an account? <a routerLink="/signup">Signup</a>
    </div>
</form>
