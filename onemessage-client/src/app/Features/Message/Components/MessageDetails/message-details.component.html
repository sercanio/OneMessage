<div class="relative p-4 flex flex-col h-[650px] max-w-3xl">
  <h2 class="text-xl font-bold mb-4">{{ contact.name }}</h2>
  <div class="flex-1 overflow-y-auto" #messageContainer>
    <div
      *ngFor="let message of $messages | async"
      [ngClass]="{ 'text-right': message.senderId === contact.id }"
      class="mb-2"
    >
      <div
        class="chat"
        [ngClass]="{
          'chat-start': message.senderId !== contact.id,
          'chat-end': message.senderId === contact.id
        }"
      >
        <div class="chat-image avatar my-2">
          <div class="w-10 rounded-full">
            <img
              alt="Tailwind CSS chat bubble component"
              src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg"
            />
          </div>
        </div>
        <div class="chat-bubble">{{ message.content }}</div>
      </div>
    </div>
  </div>
  <ngx-spinner
    [fullScreen]="false"
    bdColor="rgba(0, 0, 0, 0.75)"
    type="ball-scale-multiple"
  >
    <p style="font-size: 20px; color: white">Loading...</p>
  </ngx-spinner>

  <form [formGroup]="messageForm" class="w-full">
    <div class="relative p-4 flex flex-col h-full max-h-[850px] max-w-3xl">
      <div
        class="flex items-center w-full h-12 rounded-lg bg-slate-700 overflow-hidden mt-4"
      >
        <input
          type="text"
          placeholder="Type here"
          class="flex-grow px-4 py-2 text-slate-600 focus:outline-none rounded-l-lg bg-transparent"
          formControlName="messageText"
        />
        <button
          class="btn btn-primary bg-slate-800 hover:bg-slate-900 border-none rounded-r-lg px-4 py-2"
          (click)="sendMessage(contact.id)"
        >
          Send
        </button>
      </div>
    </div>
  </form>
</div>
